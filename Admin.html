<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<title>Área Administrativa - Restaurante Okami</title>
<style>
  body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #cd5a13 0%, #d81b60 100%);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #fff;
  }
  .container {
    background-color: rgba(0,0,0,0.75);
    padding: 30px 40px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    width: 100%;
    max-width: 450px;
    text-align: center;
  }
  h2 {
    margin-bottom: 20px;
    font-weight: 700;
    font-size: 28px;
    letter-spacing: 1px;
    color: #ffb74d;
    text-shadow: 0 0 8px rgba(255,183,77,0.8);
  }
  .tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 25px;
  }
  .tab {
    cursor: pointer;
    padding: 10px 30px;
    border-bottom: 3px solid transparent;
    font-weight: 700;
    color: #ffb74d;
    transition: border-bottom-color 0.3s;
  }
  .tab.active {
    border-bottom-color: #ffb74d;
  }
  form {
    text-align: left;
  }
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    font-size: 14px;
    color: #ffa726;
  }
  input[type="text"],
  input[type="password"] {
    width: 100%;
    padding: 12px 15px;
    margin-bottom: 20px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    box-sizing: border-box;
    outline: none;
    transition: box-shadow 0.3s ease;
  }
  input[type="text"]:focus,
  input[type="password"]:focus {
    box-shadow: 0 0 8px #ffb74d;
  }
  button {
    width: 100%;
    padding: 14px 0;
    background-color: #ffb74d;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    font-weight: 700;
    color: #3e2723;
    cursor: pointer;
    box-shadow: 0 5px 10px rgba(255,183,77,0.7);
    transition: background-color 0.3s;
  }
  button:hover {
    background-color: #ff9800;
    color: #fff;
    box-shadow: 0 8px 20px rgba(255,152,0,0.9);
  }
  .error-message {
    color: #ff5252;
    margin-bottom: 15px;
    font-weight: 600;
    display: none;
  }
  .success-message {
    color: #81c784;
    margin-bottom: 15px;
    font-weight: 600;
    display: none;
  }
  /* Comandas view */
  .comandas-container {
    max-height: 400px;
    overflow-y: auto;
    background: #fff;
    color: #333;
    border-radius: 8px;
    padding: 20px;
    margin-top: 30px;
    display: none;
  }
  .pedido {
    border-bottom: 1px solid #ccc;
    margin-bottom: 15px;
    padding-bottom: 10px;
  }
  .pedido:last-child {
    border-bottom: none;
  }
  .pedido h3 {
    color: #cd5a13;
    margin-bottom: 8px;
  }
  .pedido ul {
    padding-left: 20px;
    margin: 5px 0;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Área Administrativa</h2>
  <div class="tabs">
    <div class="tab active" id="tab-login">Login</div>
    <div class="tab" id="tab-cadastro">Cadastro</div>
    <div class="tab" id="tab-comandas">Comandas</div>
  </div>

  <!-- Login -->
  <form id="form-login">
    <div class="error-message" id="login-error">Usuário ou senha incorretos.</div>
    <label for="loginUser">Usuário</label>
    <input type="text" id="loginUser" required autocomplete="username" />
    <label for="loginPass">Senha</label>
    <input type="password" id="loginPass" required autocomplete="current-password" />
    <button type="submit">Entrar</button>
  </form>

  <!-- Cadastro -->
  <form id="form-cadastro" style="display:none;">
    <div class="error-message" id="cadastro-error"></div>
    <div class="success-message" id="cadastro-sucesso"></div>
    <label for="cadastroUser">Usuário</label>
    <input type="text" id="cadastroUser" required autocomplete="username" />
    <label for="cadastroPass">Senha</label>
    <input type="password" id="cadastroPass" required minlength="6" autocomplete="new-password" />
    <label for="cadastroPassConfirm">Confirmar Senha</label>
    <input type="password" id="cadastroPassConfirm" required minlength="6" autocomplete="new-password" />
    <button type="submit">Cadastrar</button>
  </form>

  <!-- Comandas -->
  <div class="comandas-container" id="comandasView"></div>
</div>

<script>
  // Função hash simples para senha
  function simpleHash(str) {
    let hash = 0;
    for(let i = 0; i < str.length; i++) {
      hash = (hash << 5) - hash + str.charCodeAt(i);
      hash |= 0;
    }
    return hash.toString();
  }

  // Elementos
  const tabLogin = document.getElementById('tab-login');
  const tabCadastro = document.getElementById('tab-cadastro');
  const tabComandas = document.getElementById('tab-comandas');
  const formLogin = document.getElementById('form-login');
  const formCadastro = document.getElementById('form-cadastro');
  const comandasView = document.getElementById('comandasView');
  const loginError = document.getElementById('login-error');
  const cadastroError = document.getElementById('cadastro-error');
  const cadastroSucesso = document.getElementById('cadastro-sucesso');

  // Controle abas
  function resetTabs() {
    tabLogin.classList.remove('active');
    tabCadastro.classList.remove('active');
    tabComandas.classList.remove('active');
    formLogin.style.display = 'none';
    formCadastro.style.display = 'none';
    comandasView.style.display = 'none';
    loginError.style.display = 'none';
    cadastroError.style.display = 'none';
    cadastroSucesso.style.display = 'none';
  }

  tabLogin.addEventListener('click', () => {
    resetTabs();
    tabLogin.classList.add('active');
    formLogin.style.display = 'block';
  });
  tabCadastro.addEventListener('click', () => {
    resetTabs();
    tabCadastro.classList.add('active');
    formCadastro.style.display = 'block';
  });
  tabComandas.addEventListener('click', () => {
    resetTabs();
    tabComandas.classList.add('active');
    comandasView.style.display = 'block';
    carregarComandas();
  });

  // Inicial
  resetTabs();
  tabLogin.classList.add('active');
  formLogin.style.display = 'block';

  // Cadastro
  formCadastro.addEventListener('submit', (e) => {
    e.preventDefault();
    cadastroError.style.display = 'none';
    cadastroSucesso.style.display = 'none';

    const user = document.getElementById('cadastroUser').value.trim();
    const pass = document.getElementById('cadastroPass').value;
    const passConfirm = document.getElementById('cadastroPassConfirm').value;

    if(pass !== passConfirm) {
      cadastroError.textContent = 'As senhas não coincidem.';
      cadastroError.style.display = 'block';
      return;
    }

    // Save credentials
    localStorage.setItem('adminUser', user);
    localStorage.setItem('adminPassHash', simpleHash(pass));

    cadastroSucesso.textContent = 'Cadastro realizado com sucesso! Agora faça login.';
    cadastroSucesso.style.display = 'block';
    formCadastro.reset();
  });

  // Login
  formLogin.addEventListener('submit', (e) => {
    e.preventDefault();
    loginError.style.display = 'none';

    const user = document.getElementById('loginUser').value.trim();
    const pass = document.getElementById('loginPass').value;

    const storedUser = localStorage.getItem('adminUser');
    const storedPassHash = localStorage.getItem('adminPassHash');

    if(storedUser && storedPassHash && user === storedUser && simpleHash(pass) === storedPassHash) {
      // Login OK
      alert('Login bem-sucedido! Acessando comandas...');
      resetTabs();
      tabComandas.classList.add('active');
      formLogin.style.display = 'none';
      comandasView.style.display = 'block';
      carregarComandas();
    } else {
      loginError.style.display = 'block';
    }
  });

  // Carregar comandas do localStorage
  function carregarComandas() {
    const pedidosContainer = comandasView;
    const pedidos = JSON.parse(localStorage.getItem('pedidos')) || [];

    if (pedidos.length === 0) {
      pedidosContainer.innerHTML = '<p style="text-align: center; color:#cd5a13;">Nenhum pedido encontrado.</p>';
      return;
    }

    pedidosContainer.innerHTML = '';

    pedidos.forEach((pedido, index) => {
      const pedidoDiv = document.createElement('div');
      pedidoDiv.classList.add('pedido');
      let itensHtml = '<ul>';
      pedido.itens.forEach(item => {
        itensHtml += `<li>${item.nome} - Quantidade: ${item.quantidade}`;
        if(item.observacoes && item.observacoes.length > 0) {
          itensHtml += ` (Obs: ${item.observacoes.join(', ')})`;
        }
        itensHtml += '</li>';
      });
      itensHtml += '</ul>';

      pedidoDiv.innerHTML = `
        <h3>Pedido #${index+1} - ${pedido.nomeCliente} - Mesa ${pedido.numeroMesa}</h3>
        <p><strong>Itens:</strong></p>
        ${itensHtml}
        <p><strong>Total:</strong> R$ ${pedido.total.toFixed(2)}</p>
      `;
      pedidosContainer.appendChild(pedidoDiv);
    });
  }
</script>

</body>
</html>